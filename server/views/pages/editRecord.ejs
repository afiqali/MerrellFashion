<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <% include ../partials/stylesheetPRODUCT %>
</head>
<body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container">
                  <a class="navbar-brand" href="#">Merell Fashion</a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                      <li class="nav-item active">
                        <a class="nav-link" href="/">Home
                          <span class="sr-only">(current)</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="/login">Sign in</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/signup">Sign up</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/profile">Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/comments">Comments</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/videos">Videos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/products-gallery">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/messages"> Chat </a>
                    </li>
                    </ul>
                  </div>
                </div>
              </nav>
              <!--  -->
              <form action="<%=hostPath%>/edit/<%=productlists.Itemid%>" method="post" enctype="multipart/form-data" onsubmit="return saveChanges()">        
    <div class="modal-body" style="top:100px">
        <fieldset class="form-group">
            <label for="ItemName">Product Name</label>
            <input type="text" id="ItemName" name="ItemName" class="form-control" placeholder="Product Name" required="true" value="<%=productlists.ItemName%>">
        </fieldset>

        <fieldset class="form-group">
            <label for="price">Pricing</label>
            <input type="text" id="price" name="price" class="form-control" placeholder="Price" required="true"  value="<%=productlists.price%>">
        </fieldset>

        <fieldset class="form-group">
            <label for="Description">Item Description</label>
            <textarea id="Description" name="Description" rows="8" cols="40" class="form-control" placeholder="Item Description" required="true"  value="<%=productlists.Description%>"></textarea>
        </fieldset>
        
        <div class="radiobuttons-container" >
            <fieldset class="form-group">
                <label for="Dress" class="mdl-radio mdl-js-radio">
                    <input id="Dress" class="mdl-radio__button" type="radio" name="category" value="Dress"> 
                    <span class="mdl-radio__label">Dress</span>
                </label>

                <label for="High Heels" class="mdl-radio mdl-js-radio">
                    <input id="High Heels" class="mdl-radio__button" type="radio" name="category" value="High Heels" />
                    <span class="mdl-radio__label">High Heels</span>
                </label>

                <label for="Skirt" class="mdl-radio mdl-js-radio">
                    <input id="Skirt" class="mdl-radio__button" type="radio" name="category" value="Skirt" />
                    <span class="mdl-radio__label">Skirt</span>
                </label>

                <label for="Tops" class="mdl-radio mdl-js-radio">
                    <input id="Tops" class="mdl-radio__button" type="radio" name="category" value="Tops" />
                    <span class="mdl-radio__label">Tops</span>
                </label>

                <label for="Jeans" class="mdl-radio mdl-js-radio">
                    <input id="Jeans" class="mdl-radio__button" type="radio" name="category" value="Jeans" />
                    <span class="mdl-radio__label">Jeans</span>
                </label>

                <label for="Cardigans" class="mdl-radio mdl-js-radio">
                    <input id="Cardigans" class="mdl-radio__button" type="radio" name="category" value="Cardigans" />
                    <span class="mdl-radio__label">Cardigans</span>
                </label>

                <label class="file" style="width: 100%">
                    <input type="file" id="image" name="image">
                <span class="file-custom"></span>
                </label>

                </fieldset>

            </div>

    <div class="modal-footer" data-id="<%= productlists.Itemid%>">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <button type="button" class="btn btn-secondary" onclick=discardChanges()>Cancel</button>
    </div>
</form>

    <% include ../partials/JavascriptPRODUCT %>
    <% include ../partials/javascript %>  

    <script>
        function saveChanges() {
            
            var url = "<%=hostPath%>/edit/<%=productlists.Itemid%>";

            // alert(document.getElementById("image").files[0].name);

            var record_num = $(this).closest("div").data('id');

            var newValues = {
                ItemName: $("#ItemName").val(),
                price: $("#price").val(),
                category: $("#category").val(),
                Description: $("#Description").val(),
                // imageName: document.getElementById("image").files[0].name,
                // file: document.getElementById("image").files[0].name,
            }
            $.ajax({
                url: url,
                type: "POST",
                data: JSON.stringify(newValues),
                dataType: "json",
                contentType: "application/json",
                success: function(result){
                    alert("Item details updated successfully");
                    location.href = "/products-gallery";
                },
                error: function(result){
                    alert("Error updating item details");
                    discardChanges();
                }
            })
        }

        function discardChanges() {
            location.href = "/products-gallery"
        }
    </script>

</body>
</html>
